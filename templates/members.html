{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Team members — Qizil pomada</title>

  <!-- CSS -->
  <link rel="stylesheet" href="{% static 'css/members.css' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
<!-- Mobile rail + burger (как на других страницах) -->
<div class="m-rail" id="mRail">
  <button class="m-burger" id="mBurger" aria-label="Open menu">
    <img src="{% static 'img/burger_menu.png' %}" alt="">
  </button>
</div>
<div class="m-backdrop" id="mBackdrop"></div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand">
      <a href="{% url 'index' %}">
        <img src="{% static 'img/brand-logo.png' %}" alt="Qizil pomada" />
      </a>
    </div>

    <div class="side-actions">
      <button class="action" id="btnAddMember">
        <span>Add New<br>Team Member</span>
        <i>+</i>
      </button>
    </div>

    <nav class="nav">
      <a class="nav-item" href="{% url 'index' %}">
        <img src="{% static 'img/ic-dashboard.png' %}" alt="">
        <span>Dashboard</span>
      </a>
      <a class="nav-item" href="{% url 'projects' %}">
        <img src="{% static 'img/ic-projects.png' %}" alt="">
        <span>All projects</span>
      </a>
      <a class="nav-item active" href="{% url 'members' %}">
        <img src="{% static 'img/ic-team.png' %}" alt="">
        <span>Team members</span>
      </a>
    </nav>

    <div class="powered">
      <div class="powered-text">Designed &amp; powered by</div>
      <img class="powered-logo" src="{% static 'img/joan-logo.png' %}" alt="JOAN">
    </div>
  </aside>

  <!-- Content -->
  <main class="content">
    <header class="head">
      <h1 class="title">Team members</h1>
      <div class="status">Role: <b>Editor</b></div>
    </header>

    <!-- KPI summary -->
    <section class="section">
      <h3 class="section-title">Overview</h3>
      <div class="kpi-row small">
        <div class="kpi kpi-pink">
          <div class="kpi-main">
            <div class="kpi-num" id="team-members">—</div>
            <div class="kpi-sub">total team members</div>
          </div>
        </div>
        <div class="kpi kpi-violet">
          <div class="kpi-main">
            <div class="kpi-num" id="team-uniques">—</div>
            <div class="kpi-sub">unique users (all links)</div>
          </div>
        </div>
        <div class="kpi kpi-green">
          <div class="kpi-main">
            <div class="kpi-num" id="team-clicks">—</div>
            <div class="kpi-sub">total clicks (all links)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Members list -->
    <section class="section">
      <h3 class="section-title">All members</h3>
      <div id="list" class="list"><!-- JS заполнит список участников --></div>
    </section>
  </main>

  <!-- Overlay -->
  <div id="overlay" class="overlay"></div>

  <!-- Modal: Add member -->
  <div id="modalAdd" class="modal modal-pink">
    <h3 class="modal-title">ENTER MEMBER NAME</h3>
    <input id="memberName" class="field" placeholder="Full name">
    <div class="modal-actions">
      <button id="createMember" class="btn">CREATE</button>
      <button class="btn ghost" data-close>Cancel</button>
    </div>
  </div>

  <!-- Corner alerts -->
  <div id="corner" class="corner"></div>

  <!-- JS -->
  <script src="{% static 'js/api.js' %}"></script>
  <script src="{% static 'js/members.js' %}"></script>
  <script>
  (function(){
    const body = document.body;
    const burger = document.getElementById('mBurger');
    const backdrop = document.getElementById('mBackdrop');
    const sidebar = document.querySelector('.sidebar');

    const toggle = () => body.classList.toggle('mnav-open');
    const close  = () => body.classList.remove('mnav-open');

    burger?.addEventListener('click', toggle);
    backdrop?.addEventListener('click', close);
    document.addEventListener('keydown', e => { if(e.key==='Escape') close(); });
    sidebar?.addEventListener('click', e => { if(e.target.closest('a')) close(); });
  })();
</script>

</body>
</html>
